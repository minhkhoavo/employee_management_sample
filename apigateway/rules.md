# Golang Project AI Assistant Configuration

## Project Context Analysis

### Project Root
- **Module**: `github.com/locvowork/employee_management_sample/apigateway`
- **Go Version**: 1.17.3
- **Type**: Single module API gateway service

### Architecture Pattern
- **Layered / Clean Architecture**:
  - `internal/domain`: Core business entities and interfaces
  - `internal/service`: Business logic implementation
  - `internal/repository`: Data access layer (PostgreSQL, custom builder)
  - `internal/handler`: HTTP request handlers (Echo framework)
  - `internal/config`: Configuration management
  - `internal/bootstrap`: Application wiring and startup
  - `pkg/`: Shared libraries (e.g., `simpleexcel`, `pgexcel`)

## Golang Best Practices & Conventions

### Code Style & Standards
- **Formatter**: Use `gofmt` and `goimports`.
- **Idioms**: verify interfaces at compile time, use `context.Context` for I/O.
- **Error Handling**: Use `errors.Is`/`errors.As` and `fmt.Errorf("%w", err)`. Wrap errors with context in the service/repository layers.

### Naming Conventions
- **Packages**: meaningful, short, lowercase (e.g., `simpleexcel`).
- **Interfaces**: End with `-er` if single method. Define in the package that consumes them (or in `domain` for core ports).

## Project-Specific Adaptations

### Tech Stack
- **Web Framework**: [Echo v4](https://github.com/labstack/echo)
- **Database**: PostgreSQL with `database/sql` and a custom SQL builder (`internal/repository/builder`).
- **Search**: Elasticsearch v7 (`github.com/olivere/elastic/v7`).
- **Logging**: [Zerolog](https://github.com/rs/zerolog).
- **Excel**: `github.com/xuri/excelize/v2`.
- **Config**: `.env` files loaded via `godotenv`, mapped in `internal/config`.

### Database Patterns
- **Repository Pattern**: All database access is encapsulated in `internal/repository`.
- **Query Builder**: Use the custom builder in `internal/repository/builder` for dynamic queries. Avoid raw SQL strings in handlers; use the repository methods.

### API Patterns
- **REST**: Implemented using Echo.
- **Handlers**: Located in `internal/handler`. Use dependency injection for services.
- **Middleware**: Located in `internal/middleware`.

## Code Generation Rules

### When Writing New Code
1.  **Imports**: Group standard lib, external (3rd party), and internal (project) packages.
2.  **Error Handling**: Check errors immediately. Log errors in the handler layout or service layer before returning appropriate HTTP responses.
3.  **Context**: Pass `ctx` from Handler -> Service -> Repository.

### Testing Strategy
- **Unit Tests**: Found in `*_test.go` files (e.g., `builder_test.go`).
- **Table-Driven**: Prefer table-driven tests for logic with multiple cases.
- **Mocks**: Use interfaces in `domain` to allow mocking of repositories/services.

### Documentation
- **Comments**: Document exported functions and types in `pkg` and `internal/domain`.

## Contextual Awareness

- **Configuration**: Respect `dynamic_report_config.yaml` and other YAML configs for reporting features.
- **Excel Export**: Use `pkg/simpleexcel` or `pkg/pgexcel` for Excel generation tasks. Note the difference between "simple" and "pg" (likely Postgres-integrated) excel packages.

---
**Generated by Antigravity**
**Version**: 1.0
